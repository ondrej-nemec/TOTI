<h1>Pravidla validátoru</h1>

<h2>Typ</h2>

<p>
	Specifikuje typ parametru. Pokud hodnota může být přetypována na daný typ, je automaticky přetypována (např. <code>"123"</code> s typem  <code>Integer</code> může být přetypováno na <code>123</code>). Automatické přetypování lze vypnout.
</p>

<pre><code class="language-java">
Class&lt;?&gt; requiredType = ...

itemRules.setType(requiredType);
// OR with specified message
itemRules.setType(requiredType, (translator)->translator.translate("message"));
// OR with switch for automatic cast
boolean changeValueType = ...;
itemRules.setType(requiredType, changeValueType, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.value-type-must-be</code> 
	Proměnné <code>class</code>
</div>

<h2>Povolené hodnoty</h2>

<p>
	Jakých hodnot může parametr nabývat.
</p>

<pre><code class="language-java">
Collection&lt;Object&gt; allowedValues = ...

itemRules.setAllowedValues(allowedValues);
// OR with specified message
itemRules.setAllowedValues(allowedValues, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.value-must-be-one-of</code> 
	Proměnné <code>values</code>
</div>

<h2>Maximální hodnota</h2>

<p>Jen pro číselné hodnoty</p>

<pre><code class="language-java">
Number maximalValue = ...

itemRules.setMaxValue(maximalValue);
// OR with specified message
itemRules.setMaxValue(maximalValue, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.value-must-be-less-or-equals</code> 
	Proměnné <code>maxValue</code>
</div>

<h2>Minimální hodnota</h2>

<p>Jen pro číselné hodnoty</p>

<pre><code class="language-java">
Number minimalValue = ...

itemRules.setMinValue(minimalValue);
// OR with specified message
itemRules.setMinValue(minimalValue, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.value-must-be-equals-or-higher</code> 
	Proměnné <code>minValue</code>
</div>

<h2>Minimální délka</h2>

<p>Nastavuje minimální délku textů, <code>Map</code> a <code>List</code>ů.</p>

<pre><code class="language-java">
int minLength = ...

itemRules.setMinLength(minLength);
// OR with specified message
itemRules.setMinLength(minLength, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.length-must-be-at-least</code> 
	Proměnné <code>minLength</code> 
</div>

<h2>Maximální délka</h2>

<p>Nastavuje maximální délku textů, <code>Map</code> a <code>List</code>ů.</p>

<pre><code class="language-java">
int maxLength = ...

itemRules.setMaxLength(maxLength);
// OR with specified message
itemRules.setMaxLength(maxLength, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.length-must-be-max</code> 
	Proměnné <code>maxLength</code> 
</div>

<h2>Regex</h2>

<p>Specifikuje požadovaný formát.</p>

<pre><code class="language-java">
String regex = ...

itemRules.setRegex(regex);
// OR with specified message
itemRules.setRegex(regex, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.text-not-match-pattern</code> 
	Proměnné <code>regex</code> 
</div>

<h2>Maximální velikost souboru</h2>

<p>Specifikuje maximální velikost souboru v bytech. Jen pro soubory. <strong>Nemůže přepsat maximální velikost těla požadavku nastavenou v konfiguraci serveru.</strong></p>

<pre><code class="language-java">
Integer fileMaxSize = ...

itemRules.setFileMaxSize(fileMaxSize);
// OR with specified message
itemRules.setFileMaxSize(fileMaxSize, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.file-size-can-be-max</code> 
	Proměnné <code>fileMaxSize</code> 
</div>

<h2>Minimal file size</h2>

<p>Specifikuje minimální velikost souboru v bytech. Jen pro soubory.</p>

<pre><code class="language-java">
Integer fileMinSize = ...

itemRules.setFileMinSize(fileMinSize);
// OR with specified message
itemRules.setFileMinSize(fileMinSize, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.file-size-must-be-at-least</code> 
	Proměnné <code>fileMinSize</code> 
</div>

<h2>Povolené typy souborů</h2>

<p>Jen pro soubory. Pokud není specifikováno, jsou povoleny všechny typy. Prázdná kolekce znamená, že žádný typ není povolen.</p>

<pre><code class="language-java">
Collection&lt;Object&gt; types = ...

itemRules.setAllowedFileTypes(types);
// OR with specified message
itemRules.setAllowedFileTypes(types, (translator)->translator.translate("message"));
</code></pre>

<strong>Výchozí překlad</strong>
<div>
	<code>toti.validation.file-type-is-not-allowed</code> 
	Proměnné <code>allowedFileTypes</code> 
</div>

<h2>Validace mapy</h2>

<p></p>

<pre><code class="language-java">
Validator subMapValidator = ...

itemRules.setMapSpecification(subMapValidator);
</code></pre>

<h2>Validace listu</h2>

<p></p>

<pre><code class="language-java">
Validator subListValidator = ...

itemRules.setListSpecification(subListValidator);
</code></pre>

<h2>Validace SortedMap</h2>

<p></p>

<pre><code class="language-java">
Validator subListValidator = ...

itemRules.setListSpecification(subListValidator);
</code></pre>

<h2>Změna hodnoty</h2>

<p>Provede se po validaci hodnoty.</p>

<pre><code class="language-java">
itemRules.setChangeValue((oldValue)-&gt;{
	Object newValue = ...
	return newValue;
});
</code></pre>

<h2>Přejmenování</h2>

<p>Po validaci přejmenuje parametr.</p>

<pre><code class="language-java">
String newName = ...
itemRules.rename(newName);
</code></pre>

<h2>Vlastní validace</h2>

<p>
	Umožňuje provést vlastní validaci položky. Vlastní validátor je <code>BiFunction</code>, kde vstupy jsou hodnota a translator. Výsledkem je <code>Set</code> obsahující texty chyb. Pokud vlastní validátor vrátí NULL nebo prázdný set, znamená to, že položka je validní.
</p>

<pre><code class="language-java">
itemRules.setCustomValidation((value, translator)->{
	// ...
});
</code></pre>


<h2>Global function</h2>

<p>
	Global function umožňuje měnit hodnoty, porovnávat je navzájem a dělat další validaci. Vstupními parametry jsou <code>RequestParameters</code> s daty požadavku, prázdné <code>RequestParameters</code> pro nové položky (validator params) a <code>Translator</code>. Výsledkem je <code>Set</code> obsahující texty chyb. Prázný set znamená, že vše je validní.
</p>

<p>
	Volá se až po všech ostantní validacích a to jen v případě, že validace byly úspěšné.
</p>

<pre><code class="language-java">
validator.setGlobalFunction((requestParameters, validatorParameters, translator)-&gt;{
	Set&lt;String&gt; errors = ...

	return errors;
});
</code></pre>
