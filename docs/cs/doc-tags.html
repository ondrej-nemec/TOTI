<h1>Tagy v šablonách</h1>

<h2>Proměnné</h2>

<h3>Deklarace nové proměnné</h3>

<strong>Nepárový</strong>

<p>Vytvoří proměnnou s daným typem (typ je volitelný, výchozí je <code>Object</code>), jménem a připadně hodnotou. Může být nastavena jako <code>final</code>. Deklarovaná proměnná je také dostupná jako JSP proměnná ('${...}').</p>

<p>Pokud do proměnné chcete uložit string nebo char, přidejte uvozovky.</p>

<pre><code>
// only required parameters
&lt;t:var name="" /&gt;
// all available parameters
&lt;t:var type="" name="" value="" final /&gt;
// example
&lt;t:var name="variableName" value="123" /&gt;
// example with string
&lt;t:var type="String" name="variableName" value='"some value"' /&gt;
// example with char
&lt;t:var type="char" name="variableName" value="'a'" /&gt;
</code></pre>

<h3>Nastavení hodnoty proměnné</h3>

<strong>Nepárový</strong>

<p>Nastavý proměnné hodnotu</p>

<p>Pokud do proměnné chcete uložit string nebo char, přidejte uvozovky.</p>

<pre><code>
&lt;t:set name="" value="" /&gt; <br>
// example
&lt;t:set name="variableName" value="321" /&gt;
// example string
&lt;t:set name="variableName" value='"another value"' /&gt;
// example char
&lt;t:set name="variableName" value="'b'" /&gt;
</code></pre>

<h3>Vypsání proměnné</h3>

<strong>Nepárový</strong>

<p>Vypíše proměnno na obrazovku. Při výpisu jsou nebezpečné znaky nahrazeny bezpečnými (ochrana proti XSS apod.). Nahrazení lze zrušit pomocí parametru <code>nonescape</code>.</p>

<p>
	Funkcionalita odpovídá <code>${--name--}</code> a <code>${--name--|noescape}</code>.
</p>

<pre><code>
&lt;t:out name="" /&gt;
// OR
&lt;t:out name="" nonescape /&gt;

// example
&lt;t:out name="variableName" /&gt;
</code></pre>

<h3>Výpis do konzole</h3>

<strong>Nepárový</strong>

<p>Vypíše proměnnou jako text do standartního výstupu aplikace (<code>System.out.println()</code>).</p>

<pre><code>
// print text
&lt;t:console text="" /&gt;
// example 1: print JSP variable 'greatings'
&lt;t:console text="${greatings}" /&gt;
// example 2: print 'Hello world' to console
&lt;t:console text="Hello world" /&gt;
</code></pre>


<h2>Podmínky</h2>

<h3>Switch</h3>

<strong>Párový</strong>

<p>Java <i>switch</i>.</p>

<pre><code>
&lt;t:switch object="" &gt;
	// cases
&lt;/t:switch &gt;

// example
&lt;t:switch object="${message}" &gt;
	// cases
&lt;/t:switch &gt;
</code></pre>

<h3>Case</h3>

<strong>Nepárový nebo Párový</strong>

<p>
	Java <i>case</i>. Vždy musí být uvnitř tagu <code>switch</code>. Nepároý <code>case</code> funguje jako <i>case</i> <b>bez</b> <i>break</i>. Párový <code>case</code> je <i>case</i> <b>s</b> <i>break</i>.
</p>

<p>
	Pokud hodnota v <code>cond</code> je string nebo char, přidejte uvozovky: <code>cond='"--value--"'</code> or <code>cond="\"--value--\"</code>.
</p>

<strong>Nepoužívejte tag <code>break</code> pro ukončení <code>case</code></strong>

<pre><code>
// unpaired
&lt;t:case cond="" /&gt;
// example
&lt;t:case cond='"someText"' /&gt;

// paired
&lt;t:case cond="" &gt;
	// code
&lt;/t:case &gt;
// example
&lt;t:case cond='"someText"' &gt;
	// code
&lt;/t:case &gt;
</code></pre>

<h3>Default</h3>

<strong>Nepárový nebo Párový</strong>

<p>Java <i>default</i>. Vždy musí být uvntř tagu <code>switch</code>. Pokud je nepárový, Default blok je ukončen <code>/switch</code>.</p>

<pre><code>
// unpaired
&lt;t:default /&gt;

// paired
&lt;t:default &gt;
	// your code
&lt;/t:default &gt;
</code></pre>

<h3>If</h3>

<strong>Párový</strong>

<p>Java <i>if</i>. Text v parametru <code>cond</code> je standartní Java kód.</p>

<pre><code>
&lt;t:if cond="" &gt;
	// your code
&lt;/t:if &gt;

// example
&lt;t:if cond='${message.equals("text")}' &gt;
	// your code
&lt;/t:if &gt;
</code></pre>

<h3>Else if</h3>

<strong>Nepárový</strong>

<p>Java <i>else-if</i>. Vždy v <code>if</code>. Text v parametru <code>cond</code> je standartní Java kód.</p>

<pre><code>
&lt;t:elseif cond="" /&gt;
	// your code
// example
&lt;t:elseif cond='${message}.equals("text")' /&gt;
	// your code
</code></pre>

<h3>Else</h3>

<strong>Nepárový</strong>

<p>Java <i>else</i>. Vždy uvnitř <code>if</code>, za <code>elseif</code>.</p>

<pre><code>
&lt;t:else /&gt;
	// your code
// example
&lt;t:else /&gt;
	// your code
</code></pre>

<h2>Cykly</h2>

<h3>While</h3>

<strong>Párový</strong>

<p>Java <i>while</i>. Text v parametru <code>cond</code> je standartní Java kód.</p>

<pre><code>
&lt;t:while cond="" &gt;
	// your code
&lt;/t:while&gt;

// example
&lt;t:while cond="${i} &gt; 0" &gt;
	// your code
&lt;/t:while&gt;
</code></pre>

<h3>Do while</h3>

<strong>Párový</strong>

<p>Java <i>do-while</i>. Text v parametru <code>cond</code> je standartní Java kód.</p>

<pre><code>
&lt;t:dowhile &gt;
// your code
&lt;/t:dowhile cond="" &gt;

&lt;t:dowhile &gt;
// your code
&lt;/t:dowhile cond="${i} &gt; 0" &gt;
</code></pre>

<h3>For each</h3>

<strong>Párový</strong>

<p>Java <i>foreach</i>. Může být použit pro <code>Map</code> nebo <code>Iterable</code>. Proměnné definované v parametrech (<code>item, key, value</code>) jsou dostupné jako JSP proměnné.</p>

<pre><code>
// iterate collection
&lt;t:foreach item="" collection="" &gt;
	// your code
&lt;/t:foreach&gt;

// example
&lt;t:foreach item="String userName" collection="${userNames}" &gt;
	// your code
&lt;/t:foreach&gt;

// iterate map
&lt;t:foreach key="" value="" map="" &gt;
	// your code
&lt;/t:foreach&gt;

// example
&lt;t:foreach key="String login" value="String userName" map="${users}" &gt;
	// your code
&lt;/t:foreach&gt;
</code></pre>

<h3>For</h3>

<strong>Párový</strong>

<p>Java <i>for</i>. Proměnná definovaná v <code>from</code> je dostupná jako JSP proměnná.</p>

<pre><code>
&lt;t:for from="" to="" change="" &gt; <br>
	// your code
&lt;/t:for &gt; <br>

// example
&lt;t:for from="int i = 0" to="i &lt; 10" change="i++" &gt; <br>
	// your code
&lt;/t:for &gt; <br>
</code></pre>

<h3>Continue</h3>

<strong>Nepárový</strong>

<p>Java <i>continue</i>. Vždy uvnitř cyklu.</p>

<pre><code>
&lt;t:continue /&gt;
</code></pre>

<h3>Break</h3>

<strong>Nepárový</strong>

<p>Java <i>break</i>. Vždy uvnitř cyklu.</p>

<strong>Nepoužívejte pro ukončení <code>case</code> tagu.</strong>

<pre><code>
&lt;t:break /&gt; <br>
</code></pre>

<h2>Try-catch-finally</h2>

<h3>Try</h3>

<strong>Párový</strong>

<p>Java <i>try</i>. Vyžaduje <code>catch</code> nebo <code>finally</code>.</p>

<pre><code>
&lt;t:try &gt;
	// your code
&lt;/t:try &gt;
</code></pre>

<h3>Catch</h3>

<strong>Nepárový</strong>

<p>
	Java <i>catch</i>. Vždy uvnitř tagu <code>try</code>. Má dva parametry: <code>name</code> (název výjimky, je dostupná v JSP proměnných) a  volitelně <code>exception</code> (třída/typ výjimky. Pokud není definována, použije se <code>Exception</code>). 
</p>

<pre><code>
&lt;t:catch exception="" name="" /&gt;
// OR
&lt;t:catch name="" /&gt;

// example
&lt;t:catch exception="RuntimeException" name="e" /&gt;
	// your code
</code></pre>

<h3>Finally</h3>

<strong>Nepárový</strong>

<p>Java <i>finally</i>. Vždy uvnitř <code>try</code>, za <code>catch</code>.</p>

<pre><code>
&lt;t:finally /&gt;
</code></pre>

<h2>Šablonovací nástroje</h2>

<h3>Block</h3>

<strong>Párový</strong>

<p>Definuje blok pro pozdější použití. Vyžaduje parametr <code>name</code>.</p>

<pre><code>
&lt;t:block name="" &gt;
	// your code
&lt;/t:block &gt;

// example
&lt;t:block name="content" &gt;
	// your code
&lt;/t:block &gt;
</code></pre>

<h3>Include</h3>

<strong>Nepárový</strong>

<p>
	Vypíše dříve definovaný blok nebo jinou šablonu. Blok může být volitelný - je vypsán jen pokud existuje. Pokud tag obsahuje neznámé parametry, jsou použité jako proměnné pro šablonu/blok.
</p>

<pre><code>
// include block
&lt;t:include block="" /&gt;
// example 1
&lt;t:include block="content" /&gt;
// example 2 - print block if defined
&lt;t:include block="content" optional /&gt;
// example 3 - parameters =&gt; variables
&lt;t:include block="content" var1="value1"  var2="value2" /&gt;

// include file - file path is absolute from template root
&lt;t:include file="" /&gt;
// include file from another module
&lt;t:include file="" module="" /&gt;
// example 1
&lt;t:include file="/entity/user.jsp" /&gt;
// example 2 - another module
&lt;t:include file="/entity/user.jsp" module="user" /&gt;
</code></pre>

<h3>Layout</h3>

<strong>Nepárový</strong>

<p>
	Definuje layout šablony.
</p>

<pre><code>
// layout from curent module - path is absolute from template root
&lt;t:layout path="" /&gt;
// example
&lt;t:layout path="/layout.jsp" /&gt;

// layout from another module
&lt;t:layout path="" module="" /&gt;
// example
&lt;t:layout path="/layout.jsp" module="common" /&gt;
</code></pre>

<h2>Formuláře a tabulky</h2>

<h3>Control</h3>

<strong>Párový nebo Nepárový</strong>

<p>
	Vykreslí TOTI control - tabulku nebo formulář. Parametr <code>name</code> je název JSP proměnné. Pokud tag obsahuje parametr <code>optional</code>, control je vykreslen jen, pokud je definován.
</p>
<p>
	Pokud je párový, obsah je použit jako šablona pro vykreslení. V případě, že tag obsahuje parametr <code>form</code>, je tag použit pouze pro vykreslení formuláře. Pokud tag obsahuje parametr <code>grid</code>, je tag použit pouze pro vykreslení tabulky.
</p>

<pre><code>
&lt;t:control name="" /&gt;
// optional
&lt;t:control name="" optional /&gt;
// only for grid
&lt;t:control name="" grid /&gt;
// only for form
&lt;t:control name="" form /&gt;
// example
&lt;t:control name="userGrid" /&gt;
</code></pre>

<h3>Form</h3>

<strong>Nepárový</strong>

<p>
	Při použití vlastní šablony pro formulář. Rezervuje místo pro vstup/popis vstupu/výpis chyb. Všechny nerezrované parametry jsou přidány výslednému HTML elemenut.
</p>

<pre><code>
// input
&lt;t:form input="" /&gt;
// label
&lt;t:form label="" /&gt;
// error
&lt;t:form error="" /&gt;
// example
&lt;t:form label="user-name" /&gt;
&lt;t:form input="user-name" /&gt;
&lt;t:form error="user-name" /&gt;
// with parameters - 'class' will be add to final input
&lt;t:form input="user-name" class="my-input" /&gt;
</code></pre>

<h3>Grid</h3>

<strong>Nepárový</strong>

<p>
	Při použití vlastní šablony pro tabulku. Rezervuje místo pro filtr/checkbox/tlačítko. Všechny nerezrované parametry jsou přidány výslednému HTML elemenut.
</p>

<pre><code>
// filter
&lt;t:grid filter="" /&gt;
// checkbox
&lt;t:grid checkbox="" /&gt;
// button
&lt;t:grid button="" /&gt;
// example
&lt;t:grid filter="user-name" /&gt;
// with parameters - 'class' will be add to final input
&lt;t:grid filter="user-name" class="my-input" /&gt;
</code></pre>


<h2>Others</h2>

<h3>Translate</h3>

<strong>Nepárový</strong>

<p>
	Přeloží daný text. Pro překládání je použit TOTI translator. Překládaný text je v parametru <code>message</code>. Ostatní parametry jsou použity jako proměnné.

<pre><code>
&lt;t:trans message="" /&gt;
// example with text
&lt;t:trans message="common.page.title" /&gt;
// example with variable
&lt;t:trans message="${title}" /&gt;

// using parameters
&lt;t:trans message="common.page.edit" item-name="${item.name}" /&gt;
</code></pre>

<h3>Permissions</h3>

<strong>Párový</strong>

<p>
	Vypíše obsah tagu, jen pokud má uživatel přístup na danou domému a akci. Uvnitř tagu lze použít tag <code>else</code>. Parametr <code>not</code> indikuje negaci.
</p>

<pre><code>
&lt;t:allowed domain="" action="" &gt;
	// your code
&lt;/t:allowed&gt;

// example
&lt;t:allowed domain="users" action="READ" &gt;
	// your code
&lt;/t:allowed&gt;


// example with else
&lt;t:allowed domain="users" action="READ" &gt;
	// your code
&lt;t:else/&gt;
	// your code
&lt;/t:allowed&gt;

// example with not
&lt;t:allowed domain="users" action="READ" not&gt;
	// if not allowed
	// your code
&lt;/t:allowed&gt;
</code></pre>

<h3>If current</h3>

<strong>Párový</strong>

<p>
	Vypíše obsah tagu, pokud URI splňuje dané požadavky (na modul, controller, metodu nebo libovolnou kombinaci). <code>module</code> je jméno modulu, <code>controller</code> je celý název třídy a <code>method</code> je jméno metody.
</p>

<p>
	Uvnitř tagu lze použít tag <code>else</code>. Parametr <code>not</code> indikuje negaci.
</p>

<pre><code>
&lt;t:ifcurrent module="" controller="" method="" &gt;
	// your code
&lt;/t:ifcurrent&gt;

// example 1
&lt;t:ifcurrent module="main" controller="org.example.main.controllers.FirstController" method="index" &gt;
	// only if 'main' module AND 'org.example.main.controllers.FirstController' controller AND 'index' method
&lt;/t:ifcurrent&gt;

// example 2
&lt;t:ifcurrent module="main" controller="org.example.main.controllers.FirstController" &gt;
	// only if 'main' module AND 'org.example.main.controllers.FirstController' controller. It doesn't matter the method.
&lt;/t:ifcurrent&gt;

// using not
&lt;t:ifcurrent not module="main" controller="org.example.main.controllers.FirstController" &gt;
	// only if not 'main' module OR not 'org.example.main.controllers.FirstController' controller.
&lt;/t:ifcurrent&gt;

// using else
&lt;t:ifcurrent module="main" controller="org.example.main.controllers.FirstController" &gt;
	// only if 'main' module AND 'org.example.main.controllers.FirstController' controller. It doesn't matter the method.
&lt;t:else/&gt;
	// otherwise
&lt;/t:ifcurrent&gt;
</code></pre>

<h3>Link</h3>

<strong>Nepárový</strong>

<p>
	Vytvoří odkaz. Je vyžadován controller a metoda. Controller je volitelný, pokud není použit, použije se aktuální. Controller je celé jméno třídy. URI parametry jsou součástí jména metody a jsou odděleny <code>:</code>. Ostatní parametry tagu jsou použity jako GET parametry.
</p>

<pre><code>
&lt;t:link controller="" method="" /&gt;
// example 1: with controller
&lt;t:link controller="org.example.main.controllers.FirstController" method="index" /&gt;
// example 2: without controller
&lt;t:link method="index" /&gt;
// example 3: URL parameter -&gt; /first/index/12
&lt;t:link controller="org.example.main.controllers.FirstController" method="index:12" /&gt;
// example 4: GET parameter -&gt; /first/index?id=123
&lt;t:link controller="org.example.main.controllers.FirstController" method="index" id="123" /&gt;
</code></pre>


<!--
<h3></h3>

<strong></strong>

<p></p>

<pre><code>

</code></p>
-->